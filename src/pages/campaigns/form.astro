---
import Layout from "@/layouts/layout.astro";
import CodeBlock from "@/components/codeblock.astro";
import PetitionFormHTMLRaw from "@/CodeBlocks/PetitionForm.html?raw";
import FormJavascriptRaw from "@/CodeBlocks/FormJavascript.html?raw";
import ProgressBarHTMLRaw from "@/CodeBlocks/ProgressBar.html?raw";
---

<Layout title="Petition form: Earth Charity">
    <section class="mt-4">
        <h2>A campaign or lead-gen page with a form</h2>
        <p>Imagine this was a page on your main website.</p>
        <p>
            Your supporters could start filling out the form here. When they
            click the 'Add your name' button, an Impact Stack page will open
            with the form prefilled with the data from the form here.
        </p>

        <p>
            This also includes <a href="/campaigns/progress-bar"
                >the live-updated progress bar</a
            >.
        </p>
        <p>
            Feel free to try it out. It'll open an Impact Stack form with the
            whatever data you add here already pre-filled.
        </p>

        <p class="h4">Working demo ⤵︎</p>
        <div class="form-container">
            <Fragment set:html={ProgressBarHTMLRaw} />

            <p class="h3 mt-4">Add your name</p>

            <!-- This is a <form> -->
            <Fragment set:html={PetitionFormHTMLRaw} />

            <!-- This is a script tag with Javascript in it that intercepts the form submission and opens an Impact Stack page prefilling the fields with the data from the form above. -->

            <Fragment set:html={FormJavascriptRaw} />
        </div>
    </section>
    <section>
        <hr />
        <h2>How to do it</h2>
        <p>
            Here's some basic code to get you started. Most organisations would
            need a web developer to pick this up and adapt it for your needs and
            your website technology. If you put it on your main website it would
            likely inherit a lot of the existing styling, but we'd still expect
            you to need to do some work to make sure it looked on-brand for you.
        </p>

        <div class="mt-4">
            <h3>Javascript</h3>
            <p>
                You would need something like this Javascript which looks for
                the form and intercepts the submission. Then it opens an Impact
                Stack page with the fields prefilled.
            </p>

            <CodeBlock
                code={FormJavascriptRaw}
                codeTitle="Form Javascript"
                text="See the Form Javascript Code"
            />
        </div>

        <div class="mt-4">
            <h3>HTML</h3>

            <p>
                Then you would need some HTML for the form itself. You can edit
                the fields to be whatever you want. Edit the 'action' attribute
                on the form to be the URL of your Impact Stack form.
            </p>

            <CodeBlock
                code={PetitionFormHTMLRaw}
                codeTitle="Petition form HTML"
                text="See the Petition Form Code"
            />
        </div>
    </section>

    <style>
        .form-container {
            max-width: 400px;
            margin: 0 auto;
            margin: 2rem 0;
            border: 1px solid #90c92a;
            padding: 1rem;
            border-radius: 4px;
            box-shadow:
                0 1px 3px 0 rgb(0 0 0 / 0.1),
                0 1px 2px -1px rgb(0 0 0 / 0.1);
        }
    </style>
</Layout>
